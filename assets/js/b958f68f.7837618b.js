"use strict";(self.webpackChunkdocusaurus_template_lab=self.webpackChunkdocusaurus_template_lab||[]).push([[4189],{8995:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"challenge/authentication","title":"\ud83d\udc50 RUN : Authentication challenge","description":"Hint! Remember to add the --projectId","source":"@site/docs/challenge/authentication.mdx","sourceDirName":"challenge","slug":"/challenge/authentication","permalink":"/security-basics-lab/docs/challenge/authentication","draft":false,"unlisted":false,"editUrl":"https://github.com/mongodb-developer/security-basics-lab/blob/main/docs/challenge/authentication.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Authentication","permalink":"/security-basics-lab/docs/authentication/"},"next":{"title":"Role-Based Access Control","permalink":"/security-basics-lab/docs/rbac/"}}');var a=n(4848),r=n(8453);const i={sidebar_position:2},c="\ud83d\udc50 RUN : Authentication challenge",o={},l=[{value:"1. Let&#39;s create a SCRAM user: &#39;myUser&#39; with User/Password authentication and assign it the &#39;readWriteAnyDatabase&#39; role.",id:"1-lets-create-a-scram-user-myuser-with-userpassword-authentication-and-assign-it-the-readwriteanydatabase-role",level:3},{value:"2. Lets test our SCRAM user successful creation by performing the authentication process",id:"2-lets-test-our-scram-user-successful-creation-by-performing-the-authentication-process",level:3},{value:"3. Let&#39;s create  X509 user: &#39;myX509User&#39; with User/Password authentication and assign it the &#39;readWriteAnyDatabase&#39; role.",id:"3-lets-create--x509-user-myx509user-with-userpassword-authentication-and-assign-it-the-readwriteanydatabase-role",level:3},{value:"4. Let&#39;s test our X509 User",id:"4-lets-test-our-x509-user",level:3},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const t={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components},{Details:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"-run--authentication-challenge",children:"\ud83d\udc50 RUN : Authentication challenge"})}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsxs)(t.p,{children:["Hint! Remember to add the ",(0,a.jsx)(t.code,{children:"--projectId {project_id}"})]}),"\n"]}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsxs)(t.p,{children:["Docs : atlas ",(0,a.jsx)(t.a,{href:"https://www.mongodb.com/docs/atlas/cli/current/command/atlas-dbusers-create/",children:"dbusers"})]}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"1-lets-create-a-scram-user-myuser-with-userpassword-authentication-and-assign-it-the-readwriteanydatabase-role",children:"1. Let's create a SCRAM user: 'myUser' with User/Password authentication and assign it the 'readWriteAnyDatabase' role."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"# CODE_BLOCK_7\n!atlas dbusers create <CODE_BLOCK_7>\n"})}),"\n",(0,a.jsx)(t.admonition,{type:"tip",children:(0,a.jsxs)(n,{children:[(0,a.jsx)("summary",{children:" Answer "}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"!atlas dbusers create --username myUser --password mySecurePassword --role readWriteAnyDatabase --projectId {project_id}\n"})})]})}),"\n",(0,a.jsx)(t.h3,{id:"2-lets-test-our-scram-user-successful-creation-by-performing-the-authentication-process",children:"2. Lets test our SCRAM user successful creation by performing the authentication process"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"# CODE_BLOCK_8\n!pip install pymongo dnspython  \n"})}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"# CODE_BLOCK_9\nconnection = !atlas clusters connectionStrings describe  MyNewCluster --projectId {project_id}\n\nusername = 'myUser'\npassword = 'mySecurePassword'\n\nnew_connection = connection[1].replace('mongodb+srv://', f'mongodb+srv://{username}:{password}@')\nprint(new_connection)\n\nfrom pymongo import MongoClient\nclient = MongoClient(new_connection)\n\nclient.list_database_names()\n"})}),"\n",(0,a.jsx)(t.h3,{id:"3-lets-create--x509-user-myx509user-with-userpassword-authentication-and-assign-it-the-readwriteanydatabase-role",children:"3. Let's create  X509 user: 'myX509User' with User/Password authentication and assign it the 'readWriteAnyDatabase' role."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"# CODE_BLOCK_10\n!atlas dbusers create ...\n\n!atlas dbusers certs create <CODE_BLOCK_10>  > /tmp/cert.pem\n"})}),"\n",(0,a.jsx)(t.admonition,{type:"tip",children:(0,a.jsxs)(n,{children:[(0,a.jsx)("summary",{children:" Answer "}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"# Generate an X509 certificate for a new user\n!atlas dbusers create --username myX509User --x509Type MANAGED --role readAnyDatabase --projectId {project_id}\n# Generate and save the certificate\n!atlas dbusers certs create --username myX509User --monthsUntilExpiration 1 --projectId {project_id} > /tmp/cert.pem\n"})})]})}),"\n",(0,a.jsx)(t.h3,{id:"4-lets-test-our-x509-user",children:"4. Let's test our X509 User"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"# CODE_BLOCK_11\nusername='myX509User'\nconnection = !atlas clusters connectionStrings describe MyNewCluster --projectId {project_id}\nnew_connection = connection[1].replace('.net', '.net?authSource=%24external&authMechanism=MONGODB-X509')\nprint(new_connection)\n\n# Connect using the certificate\nfrom pymongo import MongoClient\nclient = MongoClient(new_connection,\n                     tlsCertificateKeyFile='/tmp/cert.pem')\n\n# Access the database\nclient.list_database_names()\n\n"})}),"\n",(0,a.jsx)(t.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,a.jsxs)(t.p,{children:["Start the chapter on ",(0,a.jsx)(t.a,{href:"./rbac",children:"RBAC"})," for Role Based Access user management."]})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);